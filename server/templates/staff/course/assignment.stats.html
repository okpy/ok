{% extends "staff/base.html" %}
{% import 'staff/_formhelpers.html' as forms with context%}

{% block title %} Ok - {{ current_course.display_name_with_semester }}{% endblock %}

{% block main %}
  <section class="content-header">
      <h1>
        {{ assignment.display_name }} Stats
        <small>{{ current_course.offering }} - (as of ~30 minutes ago) </small>
      </h1>
      <ol class="breadcrumb">
        <li><a href="{{ url_for("admin.index") }}"><i class="fa fa-dashboard"></i> Home</a></li>
        <li><a href="{{ url_for("admin.course", cid=current_course.id) }}">
            <i class="fa fa-university"></i> {{ current_course.offering }}
        </a></li>
        <li><a href="{{ url_for('.course_assignments', cid=current_course.id) }}">
          <i class="fa fa-list"></i> Assignments</a>
        </li>
        <li> <a href="{{ url_for('.assignment', cid=current_course.id, aid=assignment.id) }}"><i class="fa fa-book"></i> {{ assignment.display_name }} </a></li>
        <li class="active"><a href="#"><i class="fa fa-bar-chart"></i> Stats </a></li>
      </ol>
  </section>

  <section class="content">
    {% include 'alerts.html' %}
    <div class="row">
        <div class="col-md-3 col-sm-12">
            <div class="box">
                <div class="box-header with-border">
                    <h3 class="box-title">Stats</h3>
                </div>
                <div class="box-body">
                  <div class="row">
                    <div class="col-sm-12">
                      <div class="description-block border-bottom">
                        <h5 class="description-header">{{ stats['students_with_subm'] }}</h5>
                        <span class="description-text">Students with submissions</span>
                      </div>
                      <!-- /.description-block -->
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-12">
                      <div class="description-block border-bottom">
                        <h5 class="description-header">{{ stats['students_with_backup'] }}</h5>
                        <span class="description-text">Students with only backups</span>
                      </div>
                      <!-- /.description-block -->
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-12">
                      <div class="description-block border-bottom">
                        <h5 class="description-header">{{ stats['students_no_backup'] }}</h5>
                        <span class="description-text">Students without submissions</span>
                      </div>
                      <!-- /.description-block -->
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-12">
                      <div class="description-block border-bottom">
                        <h5 class="description-header">{{ stats['active_groups'] }}</h5>
                        <span class="description-text">Active Groups</span>
                      </div>
                      <!-- /.description-block -->
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-12">
                      <div class="description-block border-bottom">
                        <h5 class="description-header">{{ stats['unique_submissions'] }}</h5>
                        <span class="description-text">Submissions to grade</span>
                      </div>
                      <!-- /.description-block -->
                    </div>
                  </div>

                  <div class="row">
                    <div class="col-sm-12">
                      <div class="description-block border-bottom">
                        <h5 class="description-header">{{ stats['backups'] }}</h5>
                        <span class="description-text">Total Backups</span>
                      </div>
                      <!-- /.description-block -->
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-sm-12">
                      <div class="description-block border-bottom">
                        <h5 class="description-header">{{ stats['submissions'] }}</h5>
                        <span class="description-text">Total Submissions</span>
                      </div>
                      <!-- /.description-block -->
                    </div>
                  </div>
                </div>
                <!-- /.box-body -->
            <!-- /.box -->
            </div>
        <!-- /.col -->
        </div>

        <div class="col-xs-12 col-md-9">
          <div class="box box-solid">
            <div class="box-header">
              <i class="fa fa-bar-chart-o"></i>

              <h3 class="box-title">{{ assignment.display_name }} Charts</h3>

              <div class="box-tools pull-right">
                <button type="button" class="btn btn-default btn-sm" data-widget="collapse"><i class="fa fa-minus"></i>
                </button>
                <button type="button" class="btn btn-default btn-sm" data-widget="remove"><i class="fa fa-times"></i>
                </button>
              </div>
            </div>
            <!-- /.box-header -->
            <div class="box-body">
              <div class="row">
                <div class="col-xs-12">
                    {{ subm_chart.render() | safe }}
                </div>
              </div>

              </div>
              <!-- /.row -->
            </div>
            <!-- /.box-body -->
          </div>
          <!-- /.box -->
        </div>
        <!-- /.col -->
      </div>
  <!-- </body> do not close body in template-->
{% endblock %}
